<app-main-sidebar></app-main-sidebar>

<main class="settings-page">
  <div class="settings-flex">
    <h1>User Settings</h1>

    @if (deletePrompt) {
      <div class="settings-delete-overlay">
        <section class="settings-delete-prompt">
          <div style="display: flex">
            <h2>Confirm Account Deletion</h2>

            <mat-icon
              fontIcon="close"
              (click)="toggleDeletePrompt()"
              class="close-form"
              style="margin-left: auto"
            ></mat-icon>
          </div>

          <p style="color: red">This action is permanent.</p>
          <p>Type 'confirmdelete' to confirm</p>

          <input pInputText id="delete-confirm" type="text" required />

          <p-button
            severity="danger"
            (click)="deleteAccount()"
            class="settings-delete"
          >
            Deactivate
          </p-button>
        </section>
      </div>
    }
  </div>

  <div class="settings-grid">
    <section class="settings-item">
      <h3>Account</h3>
      <p>ID: {{ user.settings.userId }}</p>
      <p>
        Username: <span>{{ user.user.username }}</span>
      </p>
      <p>
        Email: <span>{{ user.user.email }}</span>
      </p>
      <p>
        Account Created:
        <span>{{ user.user.creationDate | date: "shortDate" }}</span>
      </p>

      <p-button
        severity="danger"
        class="settings-delete"
        (click)="toggleDeletePrompt()"
      >
        Deactivate
      </p-button>
    </section>

    <section class="settings-item">
      <h3>Extra</h3>
      <a routerLink="/versions">Changelogs</a>
      <a href="https://github.com/JasonCqq/link-saver" target="_blank"
        >Source code</a
      >
      <a routerLink="/privacy">Privacy Policy</a>

      <a routerLink="/terms">Terms of Service</a>
    </section>

    <form class="settings-item">
      <h3>Preferences</h3>

      <span class="settings-theme">
        <p>Themes</p>
        <div>
          <p-button type="button" (click)="this.setTheme('light')">
            Light
          </p-button>
          <p-button type="button" (click)="this.setTheme('dim')">
            Dim
          </p-button>
          <p-button type="button" (click)="this.setTheme('dark')">
            Dark
          </p-button>
        </div>
      </span>
    </form>
  </div>
</main>
