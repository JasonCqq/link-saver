<app-main-sidebar></app-main-sidebar>

<main>
  <div class="url-title">
    <h1>URL Bank</h1>
    <p style="color: rgb(199, 199, 199); font-size: 12px">
      (Total of {{ this.urls ? this.urls.length : "" }} urls)
    </p>
  </div>

  <div class="url-util">
    <p-button class="url-util-add" (click)="toggleUrlForm()"
      >Add URL(s)</p-button
    >
    <p-button
      class="url-util-del"
      (click)="toggleDelAllPrompt()"
      severity="danger"
    >
      Delete All
    </p-button>
  </div>

  @if (delAllPrompt) {
    <p class="del-prompt" (click)="deleteAllUrls()">
      Click here to confirm Delete All.
    </p>
  }
  @if (!delAllPrompt) {
    <p class="del-note">Deletes are permanent</p>
  }

  <div class="url-grid">
    @for (u of this.urls; track u) {
      <div class="url-item">
        <div class="url-options">
          <span class="material-icons-round" (click)="copyUrl(u.url)">
            content_copy
          </span>
          <span
            class="material-icons-round url-delete"
            (click)="deleteUrl(u.id)"
          >
            close
          </span>
        </div>
        <a [href]="u.url" target="_blank" class="url-details">
          <img
            [src]="'https://www.google.com/s2/favicons?domain=' + u.url"
            alt="favicon"
          />

          <span>
            <h1 class="url-title">{{ u.title | slice: 0 : 125 }}</h1>
            <p class="url">{{ u.url }}</p>
          </span>
        </a>
      </div>
    }
  </div>
</main>

@if (urlFormPop) {
  <div class="add-url-form">
    <form [formGroup]="urlForm" (submit)="submitUrlForm()">
      <div style="display: flex">
        <h1>Add URL(s)</h1>
        <p style="color: gray; font-size: 10px; margin-left: 10px">
          Invalid urls may be omitted
        </p>
        <span
          class="material-icons-round"
          (click)="toggleUrlForm()"
          style="margin-left: auto"
        >
          close
        </span>
      </div>

      <p>
        Example: <br />
        https://url.com <br />
        https://url.com
      </p>
      <textarea
        #urls
        formControlName="urls"
        rows="4"
        cols="50"
        placeholder="URLs"
        pTextarea
        [autoResize]="true"
      ></textarea>
      <p-button type="submit" [disabled]="!urlForm.dirty">Submit</p-button>
    </form>
  </div>
}
